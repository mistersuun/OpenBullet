<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:Xceed.Wpf.Toolkit"
                    xmlns:prim="clr-namespace:Xceed.Wpf.Toolkit.Primitives">
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="../../Themes/Aero2/Common.xaml"/>
    <ResourceDictionary Source="../../Primitives/Themes/Aero2/WindowControl.xaml"/>
  </ResourceDictionary.MergedDictionaries>
  <ControlTemplate x:Key="MessageBoxTemplate" TargetType="{x:Type local:MessageBox}">
    <Grid>
      <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="group1">
          <VisualState x:Name="OK">
            <Storyboard>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_OkButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
            </Storyboard>
          </VisualState>
          <VisualState x:Name="OKCancel">
            <Storyboard>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_OkButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_CancelButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
            </Storyboard>
          </VisualState>
          <VisualState x:Name="YesNo">
            <Storyboard>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_YesButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_NoButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
            </Storyboard>
          </VisualState>
          <VisualState x:Name="YesNoCancel">
            <Storyboard>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_YesButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_NoButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_CancelButton" Storyboard.TargetProperty="Visibility">
                <DiscreteObjectKeyFrame KeyTime="0">
                  <ObjectKeyFrame.Value>
                    <Visibility>Visible</Visibility>
                  </ObjectKeyFrame.Value>
                </DiscreteObjectKeyFrame>
              </ObjectAnimationUsingKeyFrames>
            </Storyboard>
          </VisualState>
        </VisualStateGroup>
      </VisualStateManager.VisualStateGroups>
      <prim:WindowControl x:Name="PART_WindowControl" Caption="{TemplateBinding prim:WindowControl.Caption}"
                          CaptionFontSize="{TemplateBinding prim:WindowControl.CaptionFontSize}"
                          CaptionForeground="{TemplateBinding prim:WindowControl.CaptionForeground}"
                          CaptionShadowBrush="{TemplateBinding prim:WindowControl.CaptionShadowBrush}"
                          CaptionIcon="{TemplateBinding prim:WindowControl.CaptionIcon}"
                          Background="{TemplateBinding Control.Background}"
                          BorderBrush="{TemplateBinding Control.BorderBrush}"
                          BorderThickness="{TemplateBinding Control.BorderThickness}"
                          IsActive="{TemplateBinding prim:WindowControl.IsActive}"
                          WindowBackground="{TemplateBinding prim:WindowControl.WindowBackground}"
                          WindowInactiveBackground="{TemplateBinding prim:WindowControl.WindowInactiveBackground}"
                          WindowBorderBrush="{TemplateBinding prim:WindowControl.WindowBorderBrush}"
                          WindowBorderThickness="{TemplateBinding prim:WindowControl.WindowBorderThickness}"
                          CloseButtonStyle="{TemplateBinding prim:WindowControl.CloseButtonStyle}"
                          WindowOpacity="{TemplateBinding prim:WindowControl.WindowOpacity}">
        <ContentControl.Content>
          <Grid MinWidth="350">
            <Grid.RowDefinitions>
              <RowDefinition/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid Margin="24,16,24,22">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Image x:Name="MessageBoxImage" VerticalAlignment="Top" SnapsToDevicePixels="true" Stretch="None"
                     Source="{TemplateBinding local:MessageBox.ImageSource}"/>
              <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                <TextBlock x:Name="MessageText" TextWrapping="Wrap" VerticalAlignment="Center" MaxWidth="450"
                           Text="{TemplateBinding local:MessageBox.Text}" FontFamily="{TemplateBinding Control.FontFamily}"
                           FontSize="{TemplateBinding Control.FontSize}" FontStyle="{TemplateBinding Control.FontStyle}"
                           FontWeight="{TemplateBinding Control.FontWeight}" Foreground="{TemplateBinding Control.Foreground}"
                           Margin="10,0,0,0"/>
              </ScrollViewer>
            </Grid>
            <Border Grid.Row="1" Background="{TemplateBinding local:MessageBox.ButtonRegionBackground}">
              <Grid HorizontalAlignment="Right" Margin="12">
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="Auto"/>
                  <ColumnDefinition Width="Auto"/>
                  <ColumnDefinition Width="Auto"/>
                  <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Button x:Name="PART_YesButton" Grid.Column="0" MinWidth="65" Margin="6,0,0,0" Visibility="Collapsed"
                        Content="{TemplateBinding local:MessageBox.YesButtonContent}"
                        Style="{TemplateBinding local:MessageBox.YesButtonStyle}"/>
                <Button x:Name="PART_NoButton" Grid.Column="1" MinWidth="65" Margin="6,0,0,0" Visibility="Collapsed"
                        Content="{TemplateBinding local:MessageBox.NoButtonContent}"
                        Style="{TemplateBinding local:MessageBox.NoButtonStyle}"/>
                <Button x:Name="PART_OkButton" Grid.Column="2" MinWidth="65" Margin="6,0,0,0" Visibility="Collapsed"
                        Content="{TemplateBinding local:MessageBox.OkButtonContent}"
                        Style="{TemplateBinding local:MessageBox.OkButtonStyle}"/>
                <Button x:Name="PART_CancelButton" Grid.Column="3" MinWidth="65" Margin="6,0,0,0" Visibility="Collapsed"
                        Content="{TemplateBinding local:MessageBox.CancelButtonContent}"
                        Style="{TemplateBinding local:MessageBox.CancelButtonStyle}" IsCancel="true"/>
              </Grid>
            </Border>
          </Grid>
        </ContentControl.Content>
      </prim:WindowControl>
    </Grid>
  </ControlTemplate>
  <Style TargetType="{x:Type local:MessageBox}" BasedOn="{StaticResource {x:Type prim:WindowControl}}">
    <Setter Property="local:MessageBox.ButtonRegionBackground" Value="#FFF0F0F0"/>
    <Setter Property="UIElement.Focusable" Value="false"/>
    <Setter Property="FrameworkElement.MinWidth" Value="350"/>
    <Setter Property="FrameworkElement.MinHeight" Value="50"/>
    <Setter Property="FrameworkElement.MaxHeight" Value="250"/>
    <Setter Property="Control.Template" Value="{StaticResource MessageBoxTemplate}"/>
  </Style>
</ResourceDictionary>