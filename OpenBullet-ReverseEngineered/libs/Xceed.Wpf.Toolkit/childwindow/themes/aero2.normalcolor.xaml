<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="clr-namespace:Xceed.Wpf.Toolkit"
                    xmlns:prim="clr-namespace:Xceed.Wpf.Toolkit.Primitives">
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="../../Themes/Aero2/Common.xaml"/>
    <ResourceDictionary Source="../../Primitives/Themes/Aero2/WindowControl.xaml"/>
  </ResourceDictionary.MergedDictionaries>
  <SolidColorBrush x:Key="BorderBrush" Color="Orange"/>
  <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
  <Style TargetType="{x:Type local:ChildWindow}" BasedOn="{StaticResource {x:Type prim:WindowControl}}">
    <Setter Property="FrameworkElement.MinWidth" Value="120"/>
    <Setter Property="FrameworkElement.MinHeight" Value="45"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type local:ChildWindow}">
          <Grid x:Name="PART_Root">
            <FrameworkElement.Resources>
              <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
              <Style x:Key="FocusVisualStyle" TargetType="{x:Type Control}">
                <Setter Property="Control.BorderBrush" Value="Black"/>
                <Setter Property="Control.Background" Value="Transparent"/>
                <Setter Property="FrameworkElement.Margin" Value="-1"/>
                <Setter Property="Control.Template">
                  <Setter.Value>
                    <ControlTemplate>
                      <Rectangle Stroke="{TemplateBinding Control.BorderBrush}" Fill="{TemplateBinding Control.Background}"
                                 Margin="{TemplateBinding FrameworkElement.Margin}" StrokeDashArray="4 3" StrokeThickness="0.5">
                        <UIElement.RenderTransform>
                          <TranslateTransform x:Name="_translateTransform" X="{Binding Left}" Y="{Binding Top}"/>
                        </UIElement.RenderTransform>
                      </Rectangle>
                    </ControlTemplate>
                  </Setter.Value>
                </Setter>
              </Style>
            </FrameworkElement.Resources>
            <Grid x:Name="PART_WindowRoot" HorizontalAlignment="Left" VerticalAlignment="Top"
                  MinWidth="{TemplateBinding FrameworkElement.MinWidth}"
                  MinHeight="{TemplateBinding FrameworkElement.MinHeight}"
                  Width="{TemplateBinding FrameworkElement.Width}" Height="{TemplateBinding FrameworkElement.Height}">
              <prim:WindowControl x:Name="PART_WindowControl" Caption="{TemplateBinding prim:WindowControl.Caption}"
                                  CaptionFontSize="{TemplateBinding prim:WindowControl.CaptionFontSize}"
                                  CaptionForeground="{TemplateBinding prim:WindowControl.CaptionForeground}"
                                  CaptionShadowBrush="{TemplateBinding prim:WindowControl.CaptionShadowBrush}"
                                  CaptionIcon="{TemplateBinding prim:WindowControl.CaptionIcon}"
                                  Background="{TemplateBinding Control.Background}"
                                  BorderBrush="{TemplateBinding Control.BorderBrush}"
                                  BorderThickness="{TemplateBinding Control.BorderThickness}"
                                  IsActive="{TemplateBinding prim:WindowControl.IsActive}"
                                  WindowBackground="{TemplateBinding prim:WindowControl.WindowBackground}"
                                  WindowInactiveBackground="{TemplateBinding prim:WindowControl.WindowInactiveBackground}"
                                  WindowBorderBrush="{TemplateBinding prim:WindowControl.WindowBorderBrush}"
                                  WindowBorderThickness="{TemplateBinding prim:WindowControl.WindowBorderThickness}"
                                  CloseButtonVisibility="{TemplateBinding prim:WindowControl.CloseButtonVisibility}"
                                  CloseButtonStyle="{TemplateBinding prim:WindowControl.CloseButtonStyle}"
                                  WindowOpacity="{TemplateBinding prim:WindowControl.WindowOpacity}"
                                  Content="{TemplateBinding ContentControl.Content}"
                                  ContentTemplate="{TemplateBinding ContentControl.ContentTemplate}"
                                  WindowStyle="{TemplateBinding prim:WindowControl.WindowStyle}"
                                  Width="{TemplateBinding FrameworkElement.Width}" Height="{TemplateBinding FrameworkElement.Height}"/>
            </Grid>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="local:ChildWindow.WindowState" Value="Closed">
              <Setter Property="UIElement.Visibility" Value="Collapsed"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>