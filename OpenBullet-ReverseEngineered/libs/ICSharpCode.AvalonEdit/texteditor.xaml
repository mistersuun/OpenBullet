<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:AvalonEdit="clr-namespace:ICSharpCode.AvalonEdit"
                    xmlns:editing="clr-namespace:ICSharpCode.AvalonEdit.Editing">
  <Style TargetType="{x:Type AvalonEdit:TextEditor}">
    <Setter Property="Control.Foreground"
            Value="{DynamicResource {x:Static JetSystemColors.WindowTextBrushKey}}"/>
    <Setter Property="Control.Background" Value="{DynamicResource {x:Static JetSystemColors.WindowBrushKey}}"/>
    <Setter Property="FrameworkElement.FlowDirection" Value="LeftToRight"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type AvalonEdit:TextEditor}">
          <Border Background="{TemplateBinding Control.Background}"
                  BorderBrush="{TemplateBinding Control.BorderBrush}"
                  BorderThickness="{TemplateBinding Control.BorderThickness}">
            <ScrollViewer Name="PART_ScrollViewer" Focusable="false" CanContentScroll="true"
                          VerticalScrollBarVisibility="{TemplateBinding AvalonEdit:TextEditor.VerticalScrollBarVisibility}"
                          HorizontalScrollBarVisibility="{TemplateBinding AvalonEdit:TextEditor.HorizontalScrollBarVisibility}"
                          VerticalContentAlignment="Top" HorizontalContentAlignment="Left"
                          Padding="{TemplateBinding Control.Padding}"
                          Content="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TextArea}"/>
          </Border>
          <ControlTemplate.Triggers>
            <Trigger Property="AvalonEdit:TextEditor.WordWrap" Value="true">
              <Setter TargetName="PART_ScrollViewer" Property="ScrollViewer.HorizontalScrollBarVisibility"
                      Value="Disabled"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Shared="false" TargetType="{x:Type editing:TextArea}">
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="editing:TextArea.SelectionBrush">
      <Setter.Value>
        <SolidColorBrush Color="{DynamicResource {x:Static JetSystemColors.HighlightColorKey}}" Opacity="0.7"/>
      </Setter.Value>
    </Setter>
    <Setter Property="editing:TextArea.SelectionBorder">
      <Setter.Value>
        <Pen Brush="{DynamicResource {x:Static JetSystemColors.HighlightBrushKey}}" Thickness="1"/>
      </Setter.Value>
    </Setter>
    <Setter Property="editing:TextArea.SelectionForeground"
            Value="{DynamicResource {x:Static JetSystemColors.HighlightTextBrushKey}}"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type editing:TextArea}">
          <DockPanel Focusable="false">
            <ItemsControl DockPanel.Dock="Left" Focusable="false"
                          ItemsSource="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=LeftMargins}">
              <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                  <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
              </ItemsControl.ItemsPanel>
            </ItemsControl>
            <ContentPresenter Panel.ZIndex="-1" Focusable="false"
                              Content="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TextView}"/>
          </DockPanel>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
</ResourceDictionary>