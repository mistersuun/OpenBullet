<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:conv="clr-namespace:Xceed.Wpf.Toolkit.Core.Converters"
                    xmlns:local="clr-namespace:Xceed.Wpf.Toolkit.Zoombox"
                    xmlns:themes="clr-namespace:Xceed.Wpf.Toolkit.Themes">
  <conv:RoundedValueConverter x:Key="RoundedValueConverter" Precision="2"/>
  <conv:VisibilityToBoolConverter x:Key="TrueIfVisibleConverter" Inverted="false" Not="false"/>
  <conv:VisibilityToBoolConverter x:Key="TrueIfNotVisibleConverter" Inverted="false" Not="true"/>
  <conv:VisibilityToBoolConverter x:Key="VisibleIfTrueConverter" Inverted="true" Not="false"/>
  <conv:VisibilityToBoolConverter x:Key="VisibleIfNotTrueConverter" Inverted="true" Not="true"/>
  <SolidColorBrush x:Key="GlyphBrush" Color="white"/>
  <Style x:Key="TransparentButton" TargetType="{x:Type ButtonBase}" BasedOn="{x:Null}">
    <Setter Property="FrameworkElement.FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="Control.Background" Value="#333333"/>
    <Setter Property="Control.Foreground" Value="#cccccc"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type ButtonBase}">
          <Grid Background="Transparent" Cursor="Hand">
            <Rectangle x:Name="BackgroundTextBoxRectangle" Fill="{TemplateBinding Control.Background}"
                       Stroke="{TemplateBinding Control.Foreground}" RadiusX="3" RadiusY="3" Opacity="0"/>
            <ContentPresenter/>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="UIElement.IsEnabled" Value="false">
              <Setter Property="UIElement.Opacity" Value="0.4"/>
            </Trigger>
            <Trigger Property="UIElement.IsMouseOver" Value="true">
              <Setter TargetName="BackgroundTextBoxRectangle" Property="UIElement.Opacity" Value="1"/>
            </Trigger>
            <Trigger Property="UIElement.IsKeyboardFocusWithin" Value="true">
              <Setter TargetName="BackgroundTextBoxRectangle" Property="UIElement.Opacity" Value="1"/>
            </Trigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </Style>
  <Style x:Key="ViewFinderToggleButtonStyle" BasedOn="{StaticResource TransparentButton}"
         TargetType="{x:Type ToggleButton}">
    <Setter Property="UIElement.Visibility" Value="Visible"/>
    <Style.Triggers>
      <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:Zoombox}}, Path=ViewFinderVisibility}"
                   Value="Hidden">
        <Setter Property="UIElement.Visibility" Value="Collapsed"/>
      </DataTrigger>
    </Style.Triggers>
  </Style>
  <DrawingImage x:Key="ShowViewFinderGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup>
          <DrawingGroup.Transform>
            <MatrixTransform Matrix="0.707,0.707,-0.707,0.707,11.533,0.664"/>
          </DrawingGroup.Transform>
          <GeometryDrawing Brush="#FF000000"
                           Geometry="M 8.823,9.895 L 12.44,13.46 10.784,15.092 15.347,15.092 15.347,15.125 9.651,15.125 11.306,13.493 8.239,10.47 8.823,9.895 M 15.347,9.511 L 15.347,10.595 14.842,11.093 14.292,10.551 15.347,9.511 M 0,9.481 L 1.133,10.598 1.133,15.092 5.694,15.092 5.727,15.125 0,15.125 0,9.481 M 14.842,3.963 L 15.347,4.461 15.347,5.611 14.258,4.538 14.842,3.963 M 2.793,3.952 L 6.41,7.517 2.793,11.082 2.243,10.54 5.276,7.551 2.209,4.527 2.793,3.952 M 9.653,0 L 10.821,0 12.429,1.585 8.812,5.15 8.262,4.608 11.296,1.618 9.653,0 M 0,0 L 1.133,0 1.133,4.504 0,5.621 0,0 Z"/>
        </DrawingGroup>
        <DrawingGroup>
          <DrawingGroup.Transform>
            <MatrixTransform Matrix="0.707,0.707,-0.707,0.707,12.048,1.182"/>
          </DrawingGroup.Transform>
          <GeometryDrawing Brush="#4B5F5F5F"
                           Geometry="M 0,0 L 5.703,0 4.061,1.618 7.678,5.183 11.295,1.618 9.653,0 15.347,0 15.347,5.611 13.704,3.996 10.091,7.561 13.708,11.126 15.347,9.511 15.347,15.125 9.651,15.125 11.306,13.493 7.689,9.928 4.071,13.493 5.727,15.125 0,15.125 0,9.48 1.659,11.115 5.276,7.551 1.659,3.986 0,5.621 0,0 Z"/>
        </DrawingGroup>
        <DrawingGroup>
          <DrawingGroup.Transform>
            <MatrixTransform Matrix="0.707,0.707,-0.707,0.707,12.186,1.538"/>
          </DrawingGroup.Transform>
          <GeometryDrawing Brush="#FFFFFFFF"
                           Geometry="M 6.867,9.82 L 7.334,10.28 4.072,13.494 5.727,15.126 0,15.126 0,15.016 4.906,15.016 3.25,13.384 6.867,9.82 M 15.347,9.512 L 15.347,15.126 9.651,15.126 9.762,15.016 14.525,15.016 14.525,10.322 15.347,9.512 M 0,9.481 L 1.193,10.657 0.837,11.007 0,10.182 0,9.481 M 12.887,3.888 L 13.353,4.347 10.091,7.56 13.242,10.667 12.887,11.018 9.27,7.453 12.887,3.888 M 0.837,3.878 L 1.303,4.337 0,5.621 0,4.703 0.837,3.878 M 14.525,0 L 15.347,0 15.347,5.612 14.525,4.802 14.525,0 M 4.772,0 L 5.703,0 4.061,1.617 7.212,4.724 6.857,5.075 3.239,1.511 4.772,0 Z"/>
        </DrawingGroup>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="FillToBoundsGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup.Children>
          <GeometryDrawing Geometry="F1 M 218.138,210.145 L 255.599,210.145 255.599,246.628 218.138,246.628 218.138,210.145 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1.2" LineJoin="Round" Brush="{StaticResource GlyphBrush}"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 249.378,215.741 L 249.378,215.743 249.383,215.743 249.383,219.159 249.378,219.159 249.378,224.598 245.962,224.598 245.962,219.159 240.525,219.159 240.525,215.743 245.962,215.743 245.962,215.741 249.378,215.741 Z"/>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 249.383,240.726 L 249.381,240.726 249.381,240.73 245.965,240.73 245.965,240.726 240.526,240.726 240.526,237.31 245.965,237.31 245.965,231.873 249.381,231.873 249.381,237.31 249.383,237.31 249.383,240.726 Z"/>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 247.539,220.321 L 239.801,228.059 247.539,235.796 244.962,238.373 237.224,230.635 229.487,238.373 226.91,235.796 234.648,228.059 226.91,220.321 229.487,217.744 237.224,225.482 244.962,217.744 247.539,220.321 Z"/>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 224.879,240.73 L 224.879,240.729 224.874,240.729 224.874,237.312 224.879,237.312 224.879,231.873 228.295,231.873 228.295,237.312 233.732,237.312 233.732,240.729 228.295,240.729 228.295,240.73 224.879,240.73 Z"/>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 224.874,215.746 L 224.876,215.746 224.876,215.741 228.292,215.741 228.292,215.746 233.731,215.746 233.731,219.162 228.292,219.162 228.292,224.598 224.876,224.598 224.876,219.162 224.874,219.162 224.874,215.746 Z"/>
        </DrawingGroup.Children>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="FitContentGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup.Children>
          <GeometryDrawing Geometry="F1 M 267.334,210.477 L 304.795,210.477 304.795,246.96 267.334,246.96 267.334,210.477 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1.2" LineJoin="Round" Brush="{StaticResource GlyphBrush}"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 298.574,216.073 L 298.574,216.075 298.579,216.075 298.579,219.491 298.574,219.491 298.574,224.93 295.158,224.93 295.158,219.491 289.721,219.491 289.721,216.075 295.158,216.075 295.158,216.073 298.574,216.073 Z"/>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 298.579,241.058 L 298.577,241.058 298.577,241.062 295.161,241.062 295.161,241.058 289.722,241.058 289.722,237.642 295.161,237.642 295.161,232.205 298.577,232.205 298.577,237.642 298.579,237.642 298.579,241.058 Z"/>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 274.075,241.062 L 274.075,241.061 274.07,241.061 274.07,237.644 274.075,237.644 274.075,232.205 277.491,232.205 277.491,237.644 282.928,237.644 282.928,241.061 277.491,241.061 277.491,241.062 274.075,241.062 Z"/>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 274.07,216.078 L 274.072,216.078 274.072,216.073 277.488,216.073 277.488,216.078 282.927,216.078 282.927,219.494 277.488,219.494 277.488,224.93 274.072,224.93 274.072,219.494 274.07,219.494 274.07,216.078 Z"/>
        </DrawingGroup.Children>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="CenterGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup.Children>
          <GeometryDrawing Geometry="F1 M 315.334,209.944 L 352.795,209.944 352.795,246.427 315.334,246.427 315.334,209.944 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1.2" LineJoin="Round" Brush="{StaticResource GlyphBrush}"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 328.878,223.652 L 338.19,223.652 C 338.27,223.652 338.334,223.716 338.334,223.796 L 338.334,233.108 C 338.334,233.188 338.27,233.252 338.19,233.252 L 328.878,233.252 C 328.799,233.252 328.734,233.188 328.734,233.108 L 328.734,223.796 C 328.734,223.716 328.799,223.652 328.878,223.652 Z"/>
        </DrawingGroup.Children>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="RefocusGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup>
          <DrawingGroup.Transform>
            <MatrixTransform Matrix="1,0,0,1,0.667,1.667"/>
          </DrawingGroup.Transform>
          <GeometryDrawing Brush="#FFFFFFFF"
                           Geometry="M 6.624,0 C 10.281,0 13.247,2.836 13.247,6.334 13.247,7.176 13.075,7.98 12.734,8.703 L 14.666,10.55 14.666,10.631 8.989,10.631 8.989,5.202 9.072,5.202 10.971,7.018 C 11.095,6.81 11.116,6.573 11.116,6.331 11.116,3.959 9.104,2.034 6.622,2.034 4.139,2.034 2.127,3.959 2.127,6.331 2.127,8.575 3.925,10.417 6.224,10.552 L 8.22,12.461 C 7.712,12.602 7.176,12.667 6.624,12.667 2.966,12.667 0,9.831 0,6.334 0,2.836 2.966,0 6.624,0 Z"/>
        </DrawingGroup>
        <GeometryDrawing Brush="#00FFFFFF">
          <GeometryDrawing.Geometry>
            <RectangleGeometry RadiusX="0" RadiusY="0" Rect="0,0,16,16"/>
          </GeometryDrawing.Geometry>
        </GeometryDrawing>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="HomeGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup.Children>
          <GeometryDrawing Geometry="F1 M 414.001,209.411 L 451.462,209.411 451.462,245.893 414.001,245.893 414.001,209.411 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1.2" LineJoin="Round" Brush="Transparent"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 442.009,240.438 C 442.009,240.534 441.886,240.612 441.735,240.612 L 423.992,240.612 C 423.841,240.612 423.718,240.534 423.718,240.438 L 423.718,229.595 418.991,229.595 C 418.874,229.479 418.874,229.289 418.991,229.173 L 432.652,215.511 C 432.769,215.395 432.958,215.395 433.075,215.511 L 446.736,229.173 C 446.853,229.289 446.853,229.479 446.736,229.595 L 442.009,229.595 442.009,240.438 Z"/>
        </DrawingGroup.Children>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="PreviousGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup.Children>
          <GeometryDrawing Brush="#00000000"
                           Geometry="F1 M 8.47772,268.99 L 75.1444,268.99 75.1444,335.657 8.47772,335.657 8.47772,268.99 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1" LineJoin="Round" Brush="Transparent"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 57.2513,286.303 L 57.2513,318.344 26.3707,302.323 57.2513,286.303 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1" LineJoin="Round" Brush="{StaticResource GlyphBrush}"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
        </DrawingGroup.Children>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="NextGlyph">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup.Children>
          <GeometryDrawing Brush="#00000000"
                           Geometry="F1 M 75.1444,415.886 L 8.47772,415.886 8.47772,349.219 75.1444,349.219 75.1444,415.886 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1" LineJoin="Round" Brush="#00FFFFFF"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 26.3708,398.573 L 26.3708,366.532 57.2514,382.553 26.3708,398.573 Z">
            <GeometryDrawing.Pen>
              <Pen Thickness="1" LineJoin="Round" Brush="{StaticResource GlyphBrush}"/>
            </GeometryDrawing.Pen>
          </GeometryDrawing>
        </DrawingGroup.Children>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <DrawingImage x:Key="CloseXDrawingImage">
    <DrawingImage.Drawing>
      <DrawingGroup>
        <DrawingGroup.Children>
          <GeometryDrawing Brush="{StaticResource GlyphBrush}"
                           Geometry="F1 M 470.57,422.952 C 470.414,423.109 470.161,423.109 470.005,422.952 L 451.714,404.662 C 451.558,404.506 451.558,404.252 451.714,404.096 L 489.144,366.667 451.714,329.237 C 451.558,329.081 451.558,328.828 451.714,328.671 L 470.005,310.381 C 470.161,310.225 470.414,310.225 470.57,310.381 L 508,347.81 545.43,310.381 C 545.586,310.225 545.839,310.225 545.995,310.381 L 564.286,328.671 C 564.442,328.828 564.442,329.081 564.286,329.237 L 526.856,366.667 564.286,404.096 C 564.442,404.252 564.442,404.506 564.286,404.662 L 545.995,422.952 C 545.839,423.109 545.586,423.109 545.43,422.952 L 508,385.523 470.57,422.952 Z"/>
        </DrawingGroup.Children>
      </DrawingGroup>
    </DrawingImage.Drawing>
  </DrawingImage>
  <Style TargetType="{x:Type local:Zoombox}">
    <Setter Property="Control.Background" Value="Transparent"/>
    <Setter Property="Control.Foreground" Value="Black"/>
    <Setter Property="local:Zoombox.PanDistance" Value="5.0"/>
    <Setter Property="local:Zoombox.ZoomOrigin" Value="0.5,0.5"/>
    <Setter Property="local:Zoombox.ZoomPercentage" Value="5.0"/>
    <Setter Property="local:Zoombox.DragModifiers" Value="Ctrl,Exact"/>
    <Setter Property="local:Zoombox.DragOnPreview" Value="false"/>
    <Setter Property="local:Zoombox.ZoomModifiers" Value="Shift,Exact"/>
    <Setter Property="local:Zoombox.ZoomOnPreview" Value="true"/>
    <Setter Property="local:Zoombox.RelativeZoomModifiers" Value="Ctrl,Alt,Exact"/>
    <Setter Property="local:Zoombox.ZoomToSelectionModifiers" Value="Alt,Exact"/>
    <Setter Property="local:Zoombox.NavigateOnPreview" Value="false"/>
    <Setter Property="local:Zoombox.ViewFinderVisibility" Value="Collapsed"/>
    <Setter Property="local:Zoombox.MinScale" Value="0.01"/>
    <Setter Property="local:Zoombox.MaxScale" Value="100.0"/>
    <Setter Property="UIElement.Focusable" Value="false"/>
    <Setter Property="Control.IsTabStop" Value="false"/>
    <Setter Property="Control.Template">
      <Setter.Value>
        <ControlTemplate TargetType="{x:Type local:Zoombox}">
          <FrameworkTemplate.Resources>
            <SolidColorBrush x:Key="SelectionBrush" Color="Transparent"/>
            <Pen x:Key="SelectionPen" Thickness="2.0" Brush="#7F3F3F3F"/>
            <Pen x:Key="ViewportPen" Thickness="1.0" Brush="Red"/>
            <InputBindingCollection x:Key="InputBindings">
              <KeyBinding Command="local:Zoombox.ZoomOut" Key="Left" Modifiers="Control"/>
              <KeyBinding Command="local:Zoombox.ZoomOut" Key="Up" Modifiers="Control"/>
              <KeyBinding Command="local:Zoombox.ZoomIn" Key="Right" Modifiers="Control"/>
              <KeyBinding Command="local:Zoombox.ZoomIn" Key="Down" Modifiers="Control"/>
              <KeyBinding Command="local:Zoombox.PanLeft" Key="Left" Modifiers="Shift+Control"/>
              <KeyBinding Command="local:Zoombox.PanUp" Key="Up" Modifiers="Shift+Control"/>
              <KeyBinding Command="local:Zoombox.PanRight" Key="Right" Modifiers="Shift+Control"/>
              <KeyBinding Command="local:Zoombox.PanDown" Key="Down" Modifiers="Shift+Control"/>
              <KeyBinding Command="local:Zoombox.Forward" Key="BrowserForward"/>
              <KeyBinding Command="local:Zoombox.Back" Key="BrowserBack"/>
              <KeyBinding Command="local:Zoombox.Back" Key="Back"/>
            </InputBindingCollection>
          </FrameworkTemplate.Resources>
          <Grid Name="BackgroundGrid" Background="{TemplateBinding Control.Background}">
            <Grid.RowDefinitions>
              <RowDefinition Height="*"/>
              <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="*"/>
              <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <ContentPresenter x:Name="_contentPresenter" Grid.Row="0" Grid.Column="0"/>
            <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Row="0" Grid.Column="1" Orientation="Vertical"
                       Visibility="Collapsed"/>
            <ScrollBar x:Name="PART_HorizontalScrollBar" Grid.Row="1" Grid.Column="0" Orientation="Horizontal"
                       Visibility="Collapsed"/>
            <Border Grid.Row="1" Grid.Column="1"
                    Background="{DynamicResource {x:Static themes:ResourceKeys.ControlNormalBackgroundKey}}"/>
            <Border Name="ViewFinder" RenderTransformOrigin="1,1" Background="#b0666666"
                    BorderBrush="{TemplateBinding Control.Foreground}" BorderThickness="2" Opacity="0" Width="200"
                    Height="190" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="10" CornerRadius="0">
              <UIElement.RenderTransform>
                <TransformGroup>
                  <ScaleTransform x:Name="LayoutScaleTransform" ScaleX="0" ScaleY="0"/>
                </TransformGroup>
              </UIElement.RenderTransform>
              <Grid Margin="4">
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto"/>
                  <RowDefinition Height="*"/>
                  <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,3">
                  <Button x:Name="BackButton" Command="local:Zoombox.Back" ToolTip="Go Back" Width="20px" Height="20px"
                          Style="{StaticResource TransparentButton}">
                    <Image Source="{StaticResource PreviousGlyph}"/>
                  </Button>
                  <Button x:Name="ForwardButton" Command="local:Zoombox.Forward" ToolTip="Go Forward" Width="20px"
                          Height="20px" Style="{StaticResource TransparentButton}">
                    <Image Source="{StaticResource NextGlyph}"/>
                  </Button>
                  <Button x:Name="HomeButton" Command="local:Zoombox.Home" ToolTip="Go Home" Width="20px" Height="20px"
                          Style="{StaticResource TransparentButton}">
                    <Image Source="{StaticResource HomeGlyph}" Margin="2"/>
                  </Button>
                  <Button x:Name="FitButton" Command="local:Zoombox.Fit" ToolTip="Fit Content within Bounds" Width="20px"
                          Height="20px" Margin="2,0" Style="{StaticResource TransparentButton}">
                    <Image Source="{StaticResource FitContentGlyph}" Margin="2"/>
                  </Button>
                  <Button x:Name="FillButton" Command="local:Zoombox.Fill" ToolTip="Fill Bounds with Content" Width="20px"
                          Height="20px" Margin="2,0" Style="{StaticResource TransparentButton}">
                    <Image Source="{StaticResource FillToBoundsGlyph}" Margin="2"/>
                  </Button>
                  <Button x:Name="CenterButton" Command="local:Zoombox.Center" ToolTip="Center Content" Width="20px"
                          Height="20px" Margin="2,0" Style="{StaticResource TransparentButton}">
                    <Image Source="{StaticResource CenterGlyph}" Margin="2"/>
                  </Button>
                  <Button x:Name="RefocusButton" Command="local:Zoombox.Refocus" Visibility="Collapsed"
                          ToolTip="Refocus View" Width="20px" Height="20px" Margin="2,0"
                          Style="{StaticResource TransparentButton}">
                    <Image Source="{StaticResource RefocusGlyph}" Margin="2"/>
                  </Button>
                </StackPanel>
                <ToggleButton x:Name="ToggleViewFinderButton" ToolTip="Hide View Finder" Height="13" Width="13" Margin="0,2,0,0"
                              HorizontalAlignment="Right" VerticalAlignment="Top" Style="{StaticResource TransparentButton}"
                              Foreground="White" IsChecked="{Binding ElementName=ShowViewFinder, Path=IsChecked}">
                  <Image Source="{StaticResource CloseXDrawingImage}" Margin="2"/>
                </ToggleButton>
                <Border Grid.Row="1" BorderBrush="{StaticResource GlyphBrush}" BorderThickness="2" Background="#80FFFFFF"/>
                <local:ZoomboxViewFinderDisplay Name="ViewFinderDisplay" Grid.Row="1" ClipToBounds="true" Background="#C0FFFFFF" Margin="2"
                                                ShadowBrush="#80FFFFFF" ViewportBrush="Transparent" ViewportPen="{StaticResource ViewportPen}"/>
              </Grid>
            </Border>
            <ToggleButton Name="ShowViewFinder" IsTabStop="false" ToolTip="Show View Finder" HorizontalAlignment="Right"
                          VerticalAlignment="Bottom" Margin="5" Height="22" Width="22"
                          Style="{StaticResource ViewFinderToggleButtonStyle}" Foreground="Transparent"
                          Background="Transparent" FocusVisualStyle="{x:Null}"
                          IsChecked="{Binding Path=ViewFinderVisibility, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource TrueIfVisibleConverter}}">
              <Grid Name="ShowViewFinderGlyph" Opacity="0">
                <Image x:Name="ShowViewFinderGlyphImage" Source="{StaticResource ShowViewFinderGlyph}"/>
              </Grid>
            </ToggleButton>
          </Grid>
          <ControlTemplate.Triggers>
            <Trigger Property="local:Zoombox.EffectiveViewStackMode" Value="Manual">
              <Setter TargetName="RefocusButton" Property="UIElement.Visibility" Value="Visible"/>
            </Trigger>
            <Trigger Property="UIElement.IsMouseOver" Value="true">
              <TriggerBase.EnterActions>
                <BeginStoryboard>
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="ShowViewFinderGlyph" Storyboard.TargetProperty="Opacity"
                                     DecelerationRatio="1" Duration="0:0:0.3" From="0" To="1" FillBehavior="HoldEnd"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.EnterActions>
              <TriggerBase.ExitActions>
                <BeginStoryboard>
                  <Storyboard>
                    <DoubleAnimation Storyboard.TargetName="ShowViewFinderGlyph" Storyboard.TargetProperty="Opacity"
                                     DecelerationRatio="1" Duration="0:0:0.3" From="1" To="0" FillBehavior="HoldEnd"/>
                  </Storyboard>
                </BeginStoryboard>
              </TriggerBase.ExitActions>
            </Trigger>
            <Trigger SourceName="ShowViewFinder" Property="ToggleButton.IsChecked" Value="False">
              <Setter TargetName="BackButton" Property="UIElement.Focusable" Value="false"/>
              <Setter TargetName="ForwardButton" Property="UIElement.Focusable" Value="false"/>
              <Setter TargetName="HomeButton" Property="UIElement.Focusable" Value="false"/>
              <Setter TargetName="FitButton" Property="UIElement.Focusable" Value="false"/>
              <Setter TargetName="FillButton" Property="UIElement.Focusable" Value="false"/>
              <Setter TargetName="CenterButton" Property="UIElement.Focusable" Value="false"/>
              <Setter TargetName="ToggleViewFinderButton" Property="UIElement.Focusable" Value="false"/>
            </Trigger>
            <Trigger Property="local:Zoombox.IsUsingScrollBars" Value="true">
              <Setter TargetName="PART_VerticalScrollBar" Property="UIElement.Visibility" Value="Visible"/>
              <Setter TargetName="PART_HorizontalScrollBar" Property="UIElement.Visibility" Value="Visible"/>
            </Trigger>
            <EventTrigger RoutedEvent="ToggleButton.Checked" SourceName="ShowViewFinder">
              <BeginStoryboard>
                <Storyboard>
                  <DoubleAnimation Storyboard.TargetName="ViewFinder" Storyboard.TargetProperty="Opacity" DecelerationRatio="1"
                                   Duration="0:0:0.3" From="0" To="1" FillBehavior="HoldEnd"/>
                  <DoubleAnimation Storyboard.TargetName="ShowViewFinder" Storyboard.TargetProperty="Opacity" DecelerationRatio="1"
                                   Duration="0:0:0.3" From="1" To="0" FillBehavior="HoldEnd"/>
                  <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
                                                 Storyboard.TargetName="LayoutScaleTransform" AccelerationRatio="1">
                    <SplineDoubleKeyFrame KeySpline="0.5,0.5,0.5,0.5" KeyTime="00:00:00.3" Value="1"/>
                  </DoubleAnimationUsingKeyFrames>
                  <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetProperty="(ScaleTransform.ScaleX)"
                                                 Storyboard.TargetName="LayoutScaleTransform" AccelerationRatio="1">
                    <SplineDoubleKeyFrame KeySpline="0.5,0.5,0.5,0.5" KeyTime="00:00:00.3" Value="1"/>
                  </DoubleAnimationUsingKeyFrames>
                </Storyboard>
              </BeginStoryboard>
            </EventTrigger>
            <EventTrigger RoutedEvent="ToggleButton.Unchecked" SourceName="ShowViewFinder">
              <BeginStoryboard>
                <Storyboard>
                  <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
                                                 Storyboard.TargetName="LayoutScaleTransform" AccelerationRatio="1">
                    <SplineDoubleKeyFrame KeySpline="0.5,0.5,0.5,0.5" KeyTime="00:00:00.3" Value="0"/>
                  </DoubleAnimationUsingKeyFrames>
                  <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetProperty="(ScaleTransform.ScaleX)"
                                                 Storyboard.TargetName="LayoutScaleTransform" AccelerationRatio="1">
                    <SplineDoubleKeyFrame KeySpline="0.5,0.5,0.5,0.5" KeyTime="00:00:00.3" Value="0"/>
                  </DoubleAnimationUsingKeyFrames>
                  <DoubleAnimation Storyboard.TargetName="ViewFinder" Storyboard.TargetProperty="Opacity" DecelerationRatio="1"
                                   Duration="0:0:0.3" From="1" To="0" FillBehavior="HoldEnd"/>
                  <DoubleAnimation Storyboard.TargetName="ShowViewFinder" Storyboard.TargetProperty="Opacity" DecelerationRatio="1"
                                   Duration="0:0:0.3" From="0" To="1" FillBehavior="HoldEnd"/>
                </Storyboard>
              </BeginStoryboard>
            </EventTrigger>
          </ControlTemplate.Triggers>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
    <Style.Triggers>
      <Trigger Property="local:Zoombox.AreDragModifiersActive" Value="true">
        <Setter Property="FrameworkElement.Cursor" Value="SizeAll"/>
      </Trigger>
      <Trigger Property="local:Zoombox.AreZoomToSelectionModifiersActive" Value="true">
        <Setter Property="FrameworkElement.Cursor" Value="Cross"/>
      </Trigger>
      <Trigger Property="local:Zoombox.AreZoomModifiersActive" Value="true">
        <Setter Property="FrameworkElement.Cursor" Value="{x:Static local:ZoomboxCursors.Zoom}"/>
      </Trigger>
      <Trigger Property="local:Zoombox.AreRelativeZoomModifiersActive" Value="true">
        <Setter Property="FrameworkElement.Cursor" Value="{x:Static local:ZoomboxCursors.ZoomRelative}"/>
      </Trigger>
      <Trigger Property="local:Zoombox.IsDraggingContent" Value="true">
        <Setter Property="FrameworkElement.Cursor" Value="SizeAll"/>
      </Trigger>
      <Trigger Property="local:Zoombox.IsSelectingRegion" Value="true">
        <Setter Property="FrameworkElement.Cursor" Value="Cross"/>
      </Trigger>
    </Style.Triggers>
  </Style>
</ResourceDictionary>